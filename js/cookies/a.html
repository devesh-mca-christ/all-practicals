<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
</head>
<body>
	 <div class="col-lg-5 col-md-8">
            <div class="form">
              <div id="sendmessage">Your message has been sent. Thank you!</div>
              <div id="errormessage"></div>
              <form method="post" role="form" class="contactForm">
                <div class="form-row">
                  <div class="form-group col-lg-6">
                    <input type="text" name="name" class="form-control" id="name" placeholder="Your Name" data-rule="minlen:4" data-msg="Please enter at least 4 chars" />
                    
                  </div>
                  <div class="form-group col-lg-6">
                    <input type="text" class="form-control" name="email" id="email" placeholder="Your Email" data-rule="email" data-msg="Please enter a valid email" />
                    
                  </div>
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" name="password" id="password" placeholder="password"   />
                 
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" name="phone" id="phone" placeholder="phone" oninput="phones()"   />
                  
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" name="subject" id="subject" placeholder="Subject" data-rule="minlen:4" data-msg="Please enter at least 8 chars of subject" />
                  
                </div>
                <div class="form-group">
                  <textarea class="form-control" name="message" rows="5" data-rule="required" id="msg" data-msg="Please write something for us" placeholder="Message"></textarea>
                  <br>
                  <p style="display:inline-block;">Theme</p>
                <input type="radio" name="color" id="color" value="#f7e7b0" style="accent-color: #f7e7b0;" checked> 
<input type="radio" name="color" id="color" value="#baf2a2" style="accent-color: #baf2a2;"> 
<input type="radio" name="color" id="color" value="#f2a2a7" style="accent-color: #f2a2a7;"> 

<br>
<p style="display:inline-block;">Image</p>
                <lable>1</lable><input type="radio" name="img" id="imgs" value="img/user.png"  checked> 
                <lable>2</lable>
<input type="radio" name="img" id="imgs2" value="img/user2.jpg" > 

                  
                </div>
                <div class="text-center"><button onclick="val()" type="submit" title="Send Message">Send Message</button></div>
              </form>
            </div>
          </div>

</body>
<script>


	//function to check phone number
function phones()
 {
  var ph=document.getElementById("phone").value;
  if(ph>9999999999)
  {
    document.getElementById("phone").value=ph.slice(0,-1);
  }
  if(isNaN(ph))
  {
    document.getElementById("phone").value=ph.slice(0,-1);
  }
 }

	// function to set cookie
	function setCookie(cname, cvalue, exdays) {
  const d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  let expires = "expires="+ d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}





//function to count number of times page visited

if (sessionStorage.clickcount) {
  sessionStorage.clickcount = Number(sessionStorage.clickcount) + 1;
  document.getElementById("viewcount").innerHTML=Number(sessionStorage.clickcount)+" Page visits by you";
} else {
  sessionStorage.clickcount = 1;
}



//function to validate form and set cookie , local storage value 

function val()
   { var res="";
    var name=document.getElementById("name").value;
    var email=document.getElementById("email").value;
    var phone=document.getElementById("phone").value;
    var password=document.getElementById("password").value;
    var subject=document.getElementById("subject").value;
    var msg=document.getElementById("msg").value;
    var colors=document.querySelector('input[name="color"]:checked').value;
    var img=document.querySelector('input[name="img"]:checked').value;
    
    if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email))
    {
     

    }
    else
    {
    res=res+"mail Invalid\n";
    
    }

  var passpattern =  /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$/;
        var password = document.getElementById('password').value;

        if(!password.match(passpattern)) {
            res=res+"Password Invalid\n";
           
        }
        if(phone=="")
        {
          res=res+"Phone number is empty\n";
        }
        if(name=="")
        {
          res=res+"Name is empty\n";
        }
        if(subject=="")
        {
          res=res+"Subject is empty\n";
        }

if(res!="")
{
  alert(res);
   }
   else
   {
   	//the below one is used to clearr the old cookies
    document.cookie = "name=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";

    //below code is to set values to the cookies 
    setCookie("name",name,2);
    setCookie("email",email,2);
    setCookie("phone",phone,2);
    setCookie("color",colors,2);
    setCookie("img",img,2);

    //to set values in local storage

    localStorage.setItem("subject",subject);
    localStorage.setItem("message",msg);


    
alert("Form submitted successfully");
   }
}


	
</script>
</html>